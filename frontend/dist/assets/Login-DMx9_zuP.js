import{u as I,j as e,F as u,a as G,b as z,c as q,d as D,e as M,f as T,g as U}from"./index-DARs2lLX.js";import{r as a}from"./leaflet-BldE4BD4.js";import{a as A}from"./react-DcIcrUde.js";import"./firebase-D_9l9YAU.js";function Y(){const[l,m]=a.useState(""),[o,g]=a.useState(""),[n,f]=a.useState(""),[i,x]=a.useState("passenger"),[r,b]=a.useState(!0),{login:p,signup:h,loginWithGoogle:y,loginWithFacebook:j,resetPassword:v,loading:t,error:c,clearError:N}=I();A();const w=a.useRef(),F=a.useRef(),k=a.useRef();a.useEffect(()=>{c&&N()},[r]);async function C(s){if(s.preventDefault(),!(!l||!o))try{await p(l,o)}catch(d){console.error("Login error:",d)}}async function R(s){if(s.preventDefault(),!(o.length<6)&&n)try{await h(l,o,n,i),b(!0)}catch(d){console.error("Registration error:",d)}}async function L(){try{await y()}catch(s){console.error("Google sign in error:",s)}}async function S(){try{await j()}catch(s){console.error("Facebook sign in error:",s)}}async function E(){if(l)try{await v(l)}catch(s){console.error("Password reset error:",s)}}function P(){setError(""),b(!r)}return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-8",children:r?"Iniciar Sesión":"Crear Cuenta"}),c&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 text-red-700 rounded-lg text-sm flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{children:c})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl flex flex-col items-center",children:[e.jsx(u,{className:"animate-spin text-blue-600 text-3xl mb-4"}),e.jsx("p",{className:"text-gray-700",children:"Procesando, por favor espera..."})]})}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("button",{type:"button",onClick:L,disabled:t,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 text-gray-700 font-medium py-3 px-4 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all disabled:opacity-70 disabled:cursor-not-allowed",children:[e.jsx(G,{className:"text-red-500 text-xl"}),"Continuar con Google"]}),e.jsxs("button",{type:"button",onClick:S,disabled:t,className:"w-full flex items-center justify-center gap-3 bg-[#1877F2] text-white font-medium py-3 px-4 rounded-lg hover:bg-[#166FE5] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#166FE5] transition-all disabled:opacity-70 disabled:cursor-not-allowed",children:[e.jsx(z,{className:"text-white text-xl"}),"Continuar con Facebook"]})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"O continúa con"})})]}),e.jsxs("form",{onSubmit:r?C:R,className:"space-y-4",children:[!r&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(q,{className:"text-gray-400"})}),e.jsx("input",{type:"text",id:"displayName",ref:k,value:n,onChange:s=>f(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Tu nombre completo",required:!r,disabled:t})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo electrónico"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(D,{className:"text-gray-400"})}),e.jsx("input",{type:"email",id:"email",ref:w,value:l,onChange:s=>m(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"tu@email.com",required:!0,disabled:t})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),r&&e.jsx("button",{type:"button",onClick:E,disabled:t,className:"text-xs text-blue-600 hover:text-blue-800 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:"¿Olvidaste tu contraseña?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(M,{className:"text-gray-400"})}),e.jsx("input",{type:"password",id:"password",ref:F,value:o,onChange:s=>g(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"••••••••",required:!0,minLength:r?1:6,disabled:t})]})]}),!r&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de cuenta"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>x("passenger"),disabled:t,className:`flex items-center justify-center gap-2 py-2 px-4 rounded-lg border ${i==="passenger"?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(T,{}),e.jsx("span",{children:"Pasajero"})]}),e.jsxs("button",{type:"button",onClick:()=>x("driver"),disabled:t,className:`flex items-center justify-center gap-2 py-2 px-4 rounded-lg border ${i==="driver"?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(U,{}),e.jsx("span",{children:"Conductor"})]})]})]}),e.jsx("button",{type:"submit",disabled:t,className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:opacity-70 disabled:cursor-not-allowed",children:t?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"animate-spin"}),"Procesando..."]}):r?"Iniciar sesión":"Registrarse"})]}),e.jsxs("div",{className:"mt-6 text-center text-sm text-gray-600",children:[r?"¿No tienes una cuenta? ":"¿Ya tienes una cuenta? ",e.jsx("button",{type:"button",onClick:P,disabled:t,className:"text-blue-600 font-medium hover:text-blue-800 hover:underline focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Regístrate":"Inicia sesión"})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-40",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl flex flex-col items-center",children:[e.jsx(u,{className:"animate-spin text-blue-600 text-3xl mb-4"}),e.jsx("p",{className:"text-gray-700",children:"Procesando tu solicitud..."})]})})]})})})}export{Y as default};
//# sourceMappingURL=Login-DMx9_zuP.js.map
