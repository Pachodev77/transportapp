{"version":3,"file":"Passenger-DGiGEVAu.js","sources":["../../src/pages/Passenger.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { MapContainer, TileLayer, Marker, Popup, useMapEvents, Polyline } from 'react-leaflet';\nimport { FaSearch, FaMapMarkerAlt, FaCar, FaSpinner, FaStar, FaClock } from 'react-icons/fa';\nimport { \n  collection, \n  query, \n  where, \n  addDoc, \n  onSnapshot,\n  serverTimestamp,\n  orderBy,\n  updateDoc,\n  doc,\n  setDoc,\n  GeoPoint\n} from 'firebase/firestore';\nimport { db } from '../firebase/config';\nimport { useAuth } from '../contexts/AuthContext';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport { STRINGS } from '../utils/constants';\nimport Button from '../components/Button';\n\n// Fix for default marker icons\nconst defaultIcon = new L.Icon({\n  iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  popupAnchor: [1, -34],\n  shadowSize: [41, 41]\n});\n\nfunction LocationSelector({ onSelect }) {\n  useMapEvents({\n    click(e) {\n      onSelect(e.latlng);\n    }\n  });\n  return null;\n}\n\n// Format date helper function\nconst formatDate = (dateString) => {\n  if (!dateString) return '';\n  const options = { \n    weekday: 'long', \n    year: 'numeric', \n    month: 'long', \n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit'\n  };\n  return new Date(dateString).toLocaleDateString('es-CO', options);\n};\n\nexport default function Passenger() {\n  const { currentUser } = useAuth();\n  const navigate = useNavigate();\n  const [origin, setOrigin] = useState(null);\n  const [destination, setDestination] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [myBookings, setMyBookings] = useState([]);\n  const [myRideRequests, setMyRideRequests] = useState([]);\n  const [availableTrips, setAvailableTrips] = useState([]);\n  const [selectedTrip, setSelectedTrip] = useState(null);\n  const [error, setError] = useState('');\n  const [activeTab, setActiveTab] = useState('search');\n  const [currentPosition, setCurrentPosition] = useState(null);\n  const [driverLocation, setDriverLocation] = useState(null);\n\n  useEffect(() => {\n    if (selectedTrip?.driverId) {\n      const driverLocationRef = doc(db, 'locations', selectedTrip.driverId);\n      const unsubscribe = onSnapshot(driverLocationRef, (doc) => {\n        if (doc.exists()) {\n          setDriverLocation(doc.data().location);\n        }\n      });\n\n      return () => {\n        unsubscribe();\n      };\n    }\n  }, [selectedTrip]);\n\n  useEffect(() => {\n    const watchId = navigator.geolocation.watchPosition(\n      (position) => {\n        const { latitude, longitude } = position.coords;\n        setCurrentPosition([latitude, longitude]);\n        if (currentUser) {\n          const locationRef = doc(db, 'locations', currentUser.uid);\n          setDoc(locationRef, { \n            location: new GeoPoint(latitude, longitude),\n            updatedAt: serverTimestamp(),\n          });\n        }\n      },\n      (error) => {\n        console.error('Error watching position:', error);\n      },\n      {\n        enableHighAccuracy: true,\n        timeout: 5000,\n        maximumAge: 0,\n      }\n    );\n\n    return () => {\n      navigator.geolocation.clearWatch(watchId);\n    };\n  }, [currentUser]);\n  \n  const tabs = [\n    { id: 'search', name: STRINGS.BUSCAR_VIAJE },\n    { id: 'my-requests', name: STRINGS.MIS_SOLICITUDES },\n    { id: 'my-trips', name: STRINGS.MIS_VIAJES },\n  ];\n\n  // Handle location selection on the map\n  const handleLocationSelect = async (latlng) => {\n    try {\n      const address = await getAddressFromCoordinates(latlng.lat, latlng.lng);\n      \n      if (!origin) {\n        setOrigin({ \n          lat: latlng.lat,\n          lng: latlng.lng,\n          name: STRINGS.ORIGEN,\n          address: address || STRINGS.UBICACION_SELECCIONADA\n        });\n      } else if (!destination) {\n        setDestination({ \n          lat: latlng.lat,\n          lng: latlng.lng,\n          name: STRINGS.DESTINO,\n          address: address || STRINGS.UBICACION_SELECCIONADA\n        });\n      }\n    } catch (error) {\n      console.error('Error getting address:', error);\n      setError(STRINGS.ERROR_OBTENER_DIRECCION);\n    }\n  };\n\n  // Helper function to get address from coordinates\n  const getAddressFromCoordinates = async (lat, lng) => {\n    try {\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&zoom=18&addressdetails=1`\n      );\n      const data = await response.json();\n      return data.display_name || STRINGS.UBICACION_SELECCIONADA;\n    } catch (error) {\n      console.error('Error getting address:', error);\n      return STRINGS.UBICACION_SELECCIONADA;\n    }\n  };\n\n  // Handle canceling a ride request\n  const handleCancelRequest = async (requestId) => {\n    if (!window.confirm(STRINGS.CONFIRMAR_CANCELAR_SOLICITUD)) {\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      const requestRef = doc(db, 'rideRequests', requestId);\n      await updateDoc(requestRef, {\n        status: 'cancelled',\n        updatedAt: new Date().toISOString()\n      });\n    } catch (error) {\n      console.error('Error canceling ride request:', error);\n      setError(STRINGS.ERROR_CANCELAR_SOLICITUD);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle ride request submission\n  const handleRequestRide = async () => {\n    if (!origin || !destination) {\n      setError(STRINGS.SELECCIONAR_ORIGEN_DESTINO);\n      return;\n    }\n    \n    if (!currentUser) {\n      navigate('/login', { state: { from: 'passenger' } });\n      return;\n    }\n    \n    setLoading(true);\n    setError('');\n    \n    try {\n      // Create a new ride request\n      const rideRequest = {\n        passengerId: currentUser.uid,\n        passengerName: currentUser.displayName || STRINGS.USUARIO,\n        passengerEmail: currentUser.email,\n        origin: {\n          lat: origin.lat,\n          lng: origin.lng,\n          name: origin.name,\n          address: origin.address\n        },\n        destination: {\n          lat: destination.lat,\n          lng: destination.lng,\n          name: destination.name,\n          address: destination.address\n        },\n        status: 'pending',\n        timestamp: Date.now(),\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString()\n      };\n      \n      // Add the ride request to Firestore\n      await addDoc(collection(db, 'rideRequests'), rideRequest);\n      \n      // Reset the form\n      setOrigin(null);\n      setDestination(null);\n      \n    } catch (error) {\n      console.error(STRINGS.ERROR_SOLICITAR_VIAJE, error);\n      setError(STRINGS.ERROR_OCURRIDO_SOLICITAR_VIAJE);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Fetch available trips\n  useEffect(() => {\n    if (!currentUser) return;\n    \n    const tripsQuery = query(\n      collection(db, 'trips'),\n      where('status', '==', 'available'),\n      orderBy('departureTime', 'asc')\n    );\n    \n    const unsubscribe = onSnapshot(tripsQuery, (snapshot) => {\n      const trips = [];\n      snapshot.forEach((doc) => {\n        trips.push({ id: doc.id, ...doc.data() });\n      });\n      setAvailableTrips(trips);\n    });\n    \n    return () => unsubscribe();\n  }, [currentUser]);\n\n  // Fetch user's ride requests\n  useEffect(() => {\n    if (!currentUser) return;\n    \n    const rideRequestsQuery = query(\n      collection(db, 'rideRequests'),\n      where('passengerId', '==', currentUser.uid),\n      orderBy('createdAt', 'desc')\n    );\n    \n    const unsubscribeRideRequests = onSnapshot(rideRequestsQuery, (snapshot) => {\n      const requests = [];\n      snapshot.forEach((doc) => {\n        requests.push({ id: doc.id, ...doc.data() });\n      });\n      setMyRideRequests(requests);\n    });\n    \n    return () => unsubscribeRideRequests();\n  }, [currentUser]);\n  \n  // Fetch user's bookings\n  useEffect(() => {\n    if (!currentUser) return;\n    \n    const bookingsQuery = query(\n      collection(db, 'bookings'),\n      where('passengerId', '==', currentUser.uid),\n      orderBy('createdAt', 'desc')\n    );\n    \n    const unsubscribeBookings = onSnapshot(bookingsQuery, (snapshot) => {\n      const bookings = [];\n      snapshot.forEach((doc) => {\n        bookings.push({ id: doc.id, ...doc.data() });\n      });\n      setMyBookings(bookings);\n    });\n    \n    return () => unsubscribeBookings();\n  }, [currentUser]);\n\n  // Handle trip booking\n  const handleBookTrip = async (trip) => {\n    if (!currentUser) {\n      navigate('/login', { state: { from: 'passenger' } });\n      return;\n    }\n    \n    setLoading(true);\n    setError('');\n    \n    try {\n      const booking = {\n        tripId: trip.id,\n        passengerId: currentUser.uid,\n        passengerName: currentUser.displayName || STRINGS.USUARIO,\n        driverId: trip.driverId,\n        driverName: trip.driverName,\n        origin: trip.origin,\n        destination: trip.destination,\n        departureTime: trip.departureTime,\n        price: trip.price,\n        status: 'pending',\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp()\n      };\n      \n      await addDoc(collection(db, 'bookings'), booking);\n      \n      // Update available seats\n      await updateDoc(doc(db, 'trips', trip.id), {\n        availableSeats: trip.availableSeats - 1,\n        updatedAt: serverTimestamp()\n      });\n      \n    } catch (error) {\n      console.error(STRINGS.ERROR_RESERVAR_VIAJE, error);\n      setError(STRINGS.ERROR_OCURRIDO_RESERVAR_VIAJE);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle booking cancellation\n  const handleCancelBooking = async (bookingId) => {\n    if (!window.confirm(STRINGS.CONFIRMAR_CANCELAR_RESERVA)) {\n      return;\n    }\n    \n    setLoading(true);\n    setError('');\n    \n    try {\n      await updateDoc(doc(db, 'bookings', bookingId), {\n        status: 'cancelled',\n        updatedAt: serverTimestamp()\n      });\n      \n      // Update available seats if the booking was confirmed\n      const booking = myBookings.find(b => b.id === bookingId);\n      if (booking && booking.status === 'confirmed') {\n        await updateDoc(doc(db, 'trips', booking.tripId), {\n          availableSeats: increment(1),\n          updatedAt: serverTimestamp()\n        });\n      }\n      \n    } catch (error) {\n      console.error(STRINGS.ERROR_CANCELAR_RESERVA, error);\n      setError(STRINGS.ERROR_OCURRIDO_CANCELAR_RESERVA);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-light flex flex-col lg:flex-row\">\n      {/* Sidebar */}\n      <div className=\"w-full lg:w-1/3 bg-white p-6 overflow-y-auto\">\n        <h1 className=\"text-2xl font-bold mb-6 text-dark\">{STRINGS.SOLICITAR_VIAJE}</h1>\n        \n        {/* Tabs */}\n        <div className=\"flex border-b mb-4\">\n          {tabs.map((tab) => (\n            <Button \n              key={tab.id}\n              className={`flex-1 py-2 font-medium ${\n                activeTab === tab.id ? 'text-primary border-b-2 border-primary' : 'text-secondary'\n              }`}\n              onClick={() => setActiveTab(tab.id)}\n            >\n              {tab.name}\n            </Button>\n          ))}\n        </div>\n        \n        {error && (\n          <div className=\"mb-4 p-3 bg-danger text-white rounded-lg\">\n            {error}\n          </div>\n        )}\n        \n        {activeTab === 'my-requests' ? (\n          <div className=\"space-y-4\">\n            <h2 className=\"text-xl font-semibold text-dark\">{STRINGS.MIS_SOLICITUDES_DE_VIAJE}</h2>\n            {myRideRequests.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <p className=\"text-secondary mb-4\">{STRINGS.NO_TIENES_SOLICITUDES}</p>\n                <Button\n                  onClick={() => setActiveTab('search')}\n                  className=\"text-primary hover:text-primary-dark font-medium\"\n                >\n                  {STRINGS.SOLICITAR_UN_VIAJE_AHORA}\n                </Button>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {myRideRequests.map((request) => (\n                  <div key={request.id} className=\"border rounded-lg p-4 hover:shadow-md transition-shadow\">\n                    <div className=\"flex justify-between items-start\">\n                      <div>\n                        <h3 className=\"font-medium text-dark\">\n                          {request.origin?.address || STRINGS.ORIGEN} → {request.destination?.address || STRINGS.DESTINO}\n                        </h3>\n                        <p className=\"text-sm text-secondary mt-1\">\n                          {formatDate(request.createdAt)}\n                        </p>\n                        <div className=\"mt-2\">\n                          <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                            request.status === 'pending' ? 'bg-warning text-white' :\n                            request.status === 'accepted' ? 'bg-success text-white' :\n                            'bg-secondary text-white'\n                          }`}>\n                            {request.status === 'pending' ? STRINGS.PENDIENTE :\n                             request.status === 'accepted' ? STRINGS.ACEPTADO : STRINGS.CANCELADO}\n                          </span>\n                        </div>\n                      </div>\n                      {request.status === 'pending' && (\n                        <Button\n                          onClick={() => handleCancelRequest(request.id)}\n                          className=\"text-danger hover:text-danger-dark text-sm font-medium\"\n                          disabled={loading}\n                        >\n                          {loading ? STRINGS.CANCELANDO : STRINGS.CANCELAR}\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        ) : activeTab === 'search' ? (\n          <>\n            <div className=\"mb-6 p-4 bg-primary-light rounded-lg\">\n              <p className=\"text-sm text-primary-dark mb-3\">\n                <span className=\"font-semibold\">{STRINGS.INSTRUCCIONES}</span> {STRINGS.SELECCIONA_ORIGEN_DESTINO_MAPA}\n              </p>\n              <ol className=\"list-decimal list-inside text-sm space-y-1 text-primary-dark\">\n                <li>{STRINGS.SELECCIONA_PUNTO_ORIGEN}</li>\n                <li>{STRINGS.SELECCIONA_PUNTO_DESTINO}</li>\n                <li>{STRINGS.CONFIRMA_SOLICITUD_VIAJE}</li>\n              </ol>\n            </div>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-dark mb-1\">{STRINGS.ORIGEN}</label>\n                <div className=\"flex items-center bg-light rounded-lg p-3\">\n                  <FaMapMarkerAlt className=\"text-danger mr-2\" />\n                  <span>{origin?.address || STRINGS.SELECCIONA_EN_MAPA}</span>\n                </div>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-dark mb-1\">{STRINGS.DESTINO}</label>\n                <div className=\"flex items-center bg-light rounded-lg p-3\">\n                  <FaMapMarkerAlt className=\"text-success mr-2\" />\n                  <span>{destination?.address || STRINGS.SELECCIONA_EN_MAPA}</span>\n                </div>\n              </div>\n              \n              <Button\n                onClick={handleRequestRide}\n                disabled={!origin || !destination || loading}\n              >\n                {loading ? (\n                  <>\n                    <FaSpinner className=\"animate-spin\" />\n                    <span>{STRINGS.BUSCANDO_CONDUCTOR}</span>\n                  </>\n                ) : (\n                  <>\n                    <FaCar />\n                    <span>{STRINGS.SOLICITAR_VIAJE}</span>\n                  </>\n                )}\n              </Button>\n              \n              {origin && destination && (\n                <p className=\"mt-2 text-xs text-center text-secondary\">\n                  {STRINGS.CONDUCTORES_CERCANOS_NOTIFICADOS}\n                </p>\n              )}\n            </div>\n            \n            {/* Available Trips */}\n            {availableTrips.length > 0 && (\n              <div className=\"mt-8\">\n                <h2 className=\"text-lg font-semibold text-dark mb-4\">{STRINGS.VIAJES_DISPONIBLES}</h2>\n                <div className=\"space-y-4\">\n                  {availableTrips.map((trip) => (\n                    <div key={trip.id} className=\"border rounded-lg p-4 hover:shadow-md transition-shadow\">\n                      <div className=\"flex justify-between items-start mb-3\">\n                        <div>\n                          <h3 className=\"font-medium text-dark\">{trip.driverName}</h3>\n                          <div className=\"flex items-center text-warning text-sm\">\n                            <FaStar className=\"mr-1\" />\n                            <span>{trip.rating} ({trip.reviewCount} {STRINGS.RESENAS})</span>\n                          </div>\n                        </div>\n                        <div className=\"text-right\">\n                          <div className=\"text-xl font-bold text-primary\">${trip.price?.toLocaleString()}</div>\n                          <div className=\"text-sm text-secondary\">\n                            {trip.availableSeats > 0 \n                              ? `${trip.availableSeats} ${trip.availableSeats > 1 ? STRINGS.ASIENTOS : STRINGS.ASIENTO} ${STRINGS.DISPONIBLE}`\n                              : STRINGS.SIN_CUPOS}\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <div className=\"space-y-2 text-sm mb-4\">\n                        <div className=\"flex items-center\">\n                          <FaMapMarkerAlt className=\"text-danger mr-2 w-4\" />\n                          <span className=\"truncate\">{trip.origin?.address}</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <FaMapMarkerAlt className=\"text-success mr-2 w-4\" />\n                          <span className=\"truncate\">{trip.destination?.address}</span>\n                        </div>\n                        <div className=\"flex items-center text-secondary\">\n                          <FaClock className=\"mr-2 w-4\" />\n                          <span>{formatDate(trip.departureTime)}</span>\n                        </div>\n                        <div className=\"flex items-center text-secondary\">\n                          <FaCar className=\"mr-2 w-4\" />\n                          <span>{trip.carModel} • {trip.carPlate}</span>\n                        </div>\n                      </div>\n                      \n                      <Button\n                        onClick={() => handleBookTrip(trip)}\n                        disabled={!trip.availableSeats || loading}\n                        className={`w-full ${\n                          trip.availableSeats > 0 \n                            ? 'bg-success hover:bg-success-dark' \n                            : 'bg-secondary cursor-not-allowed'\n                        }`}\n                      >\n                        {trip.availableSeats > 0 ? STRINGS.RESERVAR_AHORA : STRINGS.SIN_CUPOS_DISPONIBLES}\n                      </Button>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </>\n        ) : (\n          <div className=\"space-y-4\">\n            <h2 className=\"text-lg font-semibold text-dark\">{STRINGS.MIS_VIAJES}</h2>\n            \n            {myBookings.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <FaCar className=\"mx-auto text-secondary text-4xl mb-2\" />\n                <p className=\"text-secondary\">{STRINGS.NO_TIENES_VIAJES_PROGRAMADOS}</p>\n                <Button \n                  onClick={() => setActiveTab('search')}\n                  className=\"mt-2 text-primary hover:underline text-sm\"\n                >\n                  {STRINGS.BUSCAR_VIAJES_DISPONIBLES}\n                </Button>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {myBookings.map((booking) => (\n                  <div \n                    key={booking.id} \n                    className=\"border rounded-lg p-4 hover:shadow-md transition-shadow\"\n                  >\n                    <div className=\"flex justify-between items-start mb-3\">\n                      <div>\n                        <h3 className=\"font-medium text-dark\">\n                          {booking.origin?.address?.split(',')[0]} → {booking.destination?.address?.split(',')[0]}\n                        </h3>\n                        <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                          booking.status === 'confirmed' \n                            ? 'bg-success text-white' \n                            : booking.status === 'cancelled' \n                              ? 'bg-secondary text-white' \n                              : 'bg-warning text-white'\n                        }`}>\n                          {booking.status === 'confirmed' ? STRINGS.CONFIRMADO : \n                           booking.status === 'pending' ? STRINGS.PENDIENTE : \n                           booking.status === 'cancelled' ? STRINGS.CANCELADO : booking.status}\n                        </span>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-xl font-bold text-primary\">${booking.price?.toLocaleString()}</div>\n                        <div className=\"text-sm text-secondary\">\n                          {booking.departureTime && formatDate(booking.departureTime)}\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"space-y-2 text-sm\">\n                      <div className=\"flex items-center\">\n                        <FaMapMarkerAlt className=\"text-danger mr-2 w-4\" />\n                        <span className=\"truncate\">{booking.origin?.address}</span>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <FaMapMarkerAlt className=\"text-success mr-2 w-4\" />\n                        <span className=\"truncate\">{booking.destination?.address}</span>\n                      </div>\n                      {booking.driverName && (\n                        <div className=\"flex items-center text-secondary\">\n                          <span className=\"mr-2\">{STRINGS.CONDUCTOR}</span>\n                          <span>{booking.driverName}</span>\n                        </div>\n                      )}\n                    </div>\n                    \n                    {booking.status === 'pending' && (\n                      <div className=\"mt-4 pt-3 border-t\">\n                        <Button\n                          onClick={() => handleCancelBooking(booking.id)}\n                          disabled={loading}\n                          className=\"w-full bg-danger text-white py-2 rounded-lg font-medium hover:bg-danger-dark transition-colors\"\n                        >\n                          {loading ? STRINGS.CANCELANDO : STRINGS.CANCELAR_RESERVA}\n                        </Button>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n      \n      {/* Map Section */}\n      <div className=\"w-full lg:w-2/3 h-64 lg:h-full\">\n          <MapContainer \n            center={currentPosition || [0, 0]}\n            zoom={currentPosition ? 13 : 2}\n            style={{ height: '100%', width: '100%', minHeight: '400px' }}\n          >\n            <TileLayer\n              url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n              attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n            />\n            <LocationSelector onSelect={handleLocationSelect} />\n            \n            {/* Origin Marker */}\n            {origin && (\n              <Marker position={[origin.lat, origin.lng]} icon={defaultIcon}>\n                <Popup>{STRINGS.ORIGEN_PUNTOS}{origin.address}</Popup>\n              </Marker>\n            )}\n            \n            {/* Destination Marker */}\n            {destination && (\n              <Marker \n                position={[destination.lat, destination.lng]} \n                icon={new L.Icon({\n                  ...defaultIcon.options,\n                  iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',\n                  iconRetinaUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png'\n                })}\n              >\n                <Popup>{STRINGS.DESTINO_PUNTOS}{destination.address}</Popup>\n              </Marker>\n            )}\n            {/* Driver Location Marker */}\n            {driverLocation && (\n              <Marker \n                position={[driverLocation.latitude, driverLocation.longitude]}\n                icon={new L.Icon({\n                  ...defaultIcon.options,\n                  iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-green.png',\n                  iconRetinaUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png'\n                })}\n              >\n                <Popup>\n                  <div className=\"space-y-1\">\n                    <p className=\"font-medium\">{selectedTrip.driverName}</p>\n                  </div>\n                </Popup>\n              </Marker>\n            )}\n            \n            {/* Route Line */}\n          </MapContainer>\n        \n      </div>\n    </div>\n  );\n}\n"],"names":["defaultIcon","L","LocationSelector","onSelect","useMapEvents","e","formatDate","dateString","options","Passenger","currentUser","useAuth","navigate","useNavigate","origin","setOrigin","useState","destination","setDestination","loading","setLoading","myBookings","setMyBookings","myRideRequests","setMyRideRequests","availableTrips","setAvailableTrips","selectedTrip","setSelectedTrip","error","setError","activeTab","setActiveTab","currentPosition","setCurrentPosition","driverLocation","setDriverLocation","useEffect","driverLocationRef","doc","db","unsubscribe","onSnapshot","watchId","position","latitude","longitude","locationRef","setDoc","GeoPoint","serverTimestamp","tabs","STRINGS","handleLocationSelect","latlng","address","getAddressFromCoordinates","lat","lng","handleCancelRequest","requestId","requestRef","updateDoc","handleRequestRide","rideRequest","addDoc","collection","tripsQuery","query","where","orderBy","snapshot","trips","rideRequestsQuery","unsubscribeRideRequests","requests","bookingsQuery","unsubscribeBookings","bookings","handleBookTrip","trip","booking","handleCancelBooking","bookingId","b","jsxs","jsx","tab","Button","request","_a","_b","Fragment","FaMapMarkerAlt","FaSpinner","FaCar","FaStar","_c","FaClock","_d","_e","_f","_g","MapContainer","TileLayer","Marker","Popup"],"mappings":"wRAyBA,MAAMA,EAAc,IAAIC,EAAE,KAAK,CAC7B,QAAS,8DACT,cAAe,iEACf,UAAW,gEACX,SAAU,CAAC,GAAI,EAAE,EACjB,WAAY,CAAC,GAAI,EAAE,EACnB,YAAa,CAAC,EAAG,GAAG,EACpB,WAAY,CAAC,GAAI,EAAE,CACrB,CAAC,EAED,SAASC,GAAiB,CAAE,SAAAC,GAAY,CACtC,OAAAC,GAAa,CACX,MAAMC,EAAG,CACPF,EAASE,EAAE,MAAM,CACnB,CAAA,CACD,EACM,IACT,CAGA,MAAMC,EAAcC,GAAe,CACjC,GAAI,CAACA,EAAY,MAAO,GACxB,MAAMC,EAAU,CACd,QAAS,OACT,KAAM,UACN,MAAO,OACP,IAAK,UACL,KAAM,UACN,OAAQ,SAAA,EAEV,OAAO,IAAI,KAAKD,CAAU,EAAE,mBAAmB,QAASC,CAAO,CACjE,EAEA,SAAwBC,IAAY,CAClC,KAAM,CAAE,YAAAC,CAAA,EAAgBC,GAAA,EAClBC,EAAWC,GAAA,EACX,CAACC,EAAQC,CAAS,EAAIC,EAAAA,SAAS,IAAI,EACnC,CAACC,EAAaC,CAAc,EAAIF,EAAAA,SAAS,IAAI,EAC7C,CAACG,EAASC,CAAU,EAAIJ,EAAAA,SAAS,EAAK,EACtC,CAACK,EAAYC,CAAa,EAAIN,EAAAA,SAAS,CAAA,CAAE,EACzC,CAACO,EAAgBC,CAAiB,EAAIR,EAAAA,SAAS,CAAA,CAAE,EACjD,CAACS,EAAgBC,CAAiB,EAAIV,EAAAA,SAAS,CAAA,CAAE,EACjD,CAACW,EAAcC,EAAe,EAAIZ,EAAAA,SAAS,IAAI,EAC/C,CAACa,EAAOC,CAAQ,EAAId,EAAAA,SAAS,EAAE,EAC/B,CAACe,EAAWC,CAAY,EAAIhB,EAAAA,SAAS,QAAQ,EAC7C,CAACiB,EAAiBC,CAAkB,EAAIlB,EAAAA,SAAS,IAAI,EACrD,CAACmB,EAAgBC,CAAiB,EAAIpB,EAAAA,SAAS,IAAI,EAEzDqB,EAAAA,UAAU,IAAM,CACd,GAAIV,GAAA,MAAAA,EAAc,SAAU,CAC1B,MAAMW,EAAoBC,EAAIC,EAAI,YAAab,EAAa,QAAQ,EAC9Dc,EAAcC,EAAWJ,EAAoBC,GAAQ,CACrDA,EAAI,UACNH,EAAkBG,EAAI,KAAA,EAAO,QAAQ,CAEzC,CAAC,EAED,MAAO,IAAM,CACXE,EAAA,CACF,CACF,CACF,EAAG,CAACd,CAAY,CAAC,EAEjBU,EAAAA,UAAU,IAAM,CACd,MAAMM,EAAU,UAAU,YAAY,cACnCC,GAAa,CACZ,KAAM,CAAE,SAAAC,EAAU,UAAAC,CAAA,EAAcF,EAAS,OAEzC,GADAV,EAAmB,CAACW,EAAUC,CAAS,CAAC,EACpCpC,EAAa,CACf,MAAMqC,EAAcR,EAAIC,EAAI,YAAa9B,EAAY,GAAG,EACxDsC,GAAOD,EAAa,CAClB,SAAU,IAAIE,GAASJ,EAAUC,CAAS,EAC1C,UAAWI,EAAA,CAAgB,CAC5B,CACH,CACF,EACCrB,GAAU,CACT,QAAQ,MAAM,2BAA4BA,CAAK,CACjD,EACA,CACE,mBAAoB,GACpB,QAAS,IACT,WAAY,CAAA,CACd,EAGF,MAAO,IAAM,CACX,UAAU,YAAY,WAAWc,CAAO,CAC1C,CACF,EAAG,CAACjC,CAAW,CAAC,EAEhB,MAAMyC,EAAO,CACX,CAAE,GAAI,SAAU,KAAMC,EAAQ,YAAA,EAC9B,CAAE,GAAI,cAAe,KAAMA,EAAQ,eAAA,EACnC,CAAE,GAAI,WAAY,KAAMA,EAAQ,UAAA,CAAW,EAIvCC,EAAuB,MAAOC,GAAW,CAC7C,GAAI,CACF,MAAMC,EAAU,MAAMC,GAA0BF,EAAO,IAAKA,EAAO,GAAG,EAEjExC,EAOOG,GACVC,EAAe,CACb,IAAKoC,EAAO,IACZ,IAAKA,EAAO,IACZ,KAAMF,EAAQ,QACd,QAASG,GAAWH,EAAQ,sBAAA,CAC7B,EAZDrC,EAAU,CACR,IAAKuC,EAAO,IACZ,IAAKA,EAAO,IACZ,KAAMF,EAAQ,OACd,QAASG,GAAWH,EAAQ,sBAAA,CAC7B,CASL,OAASvB,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CC,EAASsB,EAAQ,uBAAuB,CAC1C,CACF,EAGMI,GAA4B,MAAOC,EAAKC,IAAQ,CACpD,GAAI,CAKF,OADa,MAHI,MAAM,MACrB,+DAA+DD,CAAG,QAAQC,CAAG,2BAAA,GAEnD,KAAA,GAChB,cAAgBN,EAAQ,sBACtC,OAASvB,EAAO,CACd,eAAQ,MAAM,yBAA0BA,CAAK,EACtCuB,EAAQ,sBACjB,CACF,EAGMO,GAAsB,MAAOC,GAAc,CAC/C,GAAK,OAAO,QAAQR,EAAQ,4BAA4B,EAIxD,GAAI,CACFhC,EAAW,EAAI,EACf,MAAMyC,EAAatB,EAAIC,EAAI,eAAgBoB,CAAS,EACpD,MAAME,EAAUD,EAAY,CAC1B,OAAQ,YACR,UAAW,IAAI,KAAA,EAAO,YAAA,CAAY,CACnC,CACH,OAAShC,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,EACpDC,EAASsB,EAAQ,wBAAwB,CAC3C,QAAA,CACEhC,EAAW,EAAK,CAClB,CACF,EAGM2C,GAAoB,SAAY,CACpC,GAAI,CAACjD,GAAU,CAACG,EAAa,CAC3Ba,EAASsB,EAAQ,0BAA0B,EAC3C,MACF,CAEA,GAAI,CAAC1C,EAAa,CAChBE,EAAS,SAAU,CAAE,MAAO,CAAE,KAAM,WAAA,EAAe,EACnD,MACF,CAEAQ,EAAW,EAAI,EACfU,EAAS,EAAE,EAEX,GAAI,CAEF,MAAMkC,EAAc,CAClB,YAAatD,EAAY,IACzB,cAAeA,EAAY,aAAe0C,EAAQ,QAClD,eAAgB1C,EAAY,MAC5B,OAAQ,CACN,IAAKI,EAAO,IACZ,IAAKA,EAAO,IACZ,KAAMA,EAAO,KACb,QAASA,EAAO,OAAA,EAElB,YAAa,CACX,IAAKG,EAAY,IACjB,IAAKA,EAAY,IACjB,KAAMA,EAAY,KAClB,QAASA,EAAY,OAAA,EAEvB,OAAQ,UACR,UAAW,KAAK,IAAA,EAChB,UAAW,IAAI,KAAA,EAAO,YAAA,EACtB,UAAW,IAAI,KAAA,EAAO,YAAA,CAAY,EAIpC,MAAMgD,EAAOC,EAAW1B,EAAI,cAAc,EAAGwB,CAAW,EAGxDjD,EAAU,IAAI,EACdG,EAAe,IAAI,CAErB,OAASW,EAAO,CACd,QAAQ,MAAMuB,EAAQ,sBAAuBvB,CAAK,EAClDC,EAASsB,EAAQ,8BAA8B,CACjD,QAAA,CACEhC,EAAW,EAAK,CAClB,CACF,EAGAiB,EAAAA,UAAU,IAAM,CACd,GAAI,CAAC3B,EAAa,OAElB,MAAMyD,EAAaC,EACjBF,EAAW1B,EAAI,OAAO,EACtB6B,EAAM,SAAU,KAAM,WAAW,EACjCC,EAAQ,gBAAiB,KAAK,CAAA,EAG1B7B,EAAcC,EAAWyB,EAAaI,GAAa,CACvD,MAAMC,EAAQ,CAAA,EACdD,EAAS,QAAShC,GAAQ,CACxBiC,EAAM,KAAK,CAAE,GAAIjC,EAAI,GAAI,GAAGA,EAAI,KAAA,EAAQ,CAC1C,CAAC,EACDb,EAAkB8C,CAAK,CACzB,CAAC,EAED,MAAO,IAAM/B,EAAA,CACf,EAAG,CAAC/B,CAAW,CAAC,EAGhB2B,EAAAA,UAAU,IAAM,CACd,GAAI,CAAC3B,EAAa,OAElB,MAAM+D,EAAoBL,EACxBF,EAAW1B,EAAI,cAAc,EAC7B6B,EAAM,cAAe,KAAM3D,EAAY,GAAG,EAC1C4D,EAAQ,YAAa,MAAM,CAAA,EAGvBI,EAA0BhC,EAAW+B,EAAoBF,GAAa,CAC1E,MAAMI,EAAW,CAAA,EACjBJ,EAAS,QAAShC,GAAQ,CACxBoC,EAAS,KAAK,CAAE,GAAIpC,EAAI,GAAI,GAAGA,EAAI,KAAA,EAAQ,CAC7C,CAAC,EACDf,EAAkBmD,CAAQ,CAC5B,CAAC,EAED,MAAO,IAAMD,EAAA,CACf,EAAG,CAAChE,CAAW,CAAC,EAGhB2B,EAAAA,UAAU,IAAM,CACd,GAAI,CAAC3B,EAAa,OAElB,MAAMkE,EAAgBR,EACpBF,EAAW1B,EAAI,UAAU,EACzB6B,EAAM,cAAe,KAAM3D,EAAY,GAAG,EAC1C4D,EAAQ,YAAa,MAAM,CAAA,EAGvBO,EAAsBnC,EAAWkC,EAAgBL,GAAa,CAClE,MAAMO,EAAW,CAAA,EACjBP,EAAS,QAAShC,GAAQ,CACxBuC,EAAS,KAAK,CAAE,GAAIvC,EAAI,GAAI,GAAGA,EAAI,KAAA,EAAQ,CAC7C,CAAC,EACDjB,EAAcwD,CAAQ,CACxB,CAAC,EAED,MAAO,IAAMD,EAAA,CACf,EAAG,CAACnE,CAAW,CAAC,EAGhB,MAAMqE,GAAiB,MAAOC,GAAS,CACrC,GAAI,CAACtE,EAAa,CAChBE,EAAS,SAAU,CAAE,MAAO,CAAE,KAAM,WAAA,EAAe,EACnD,MACF,CAEAQ,EAAW,EAAI,EACfU,EAAS,EAAE,EAEX,GAAI,CACF,MAAMmD,EAAU,CACd,OAAQD,EAAK,GACb,YAAatE,EAAY,IACzB,cAAeA,EAAY,aAAe0C,EAAQ,QAClD,SAAU4B,EAAK,SACf,WAAYA,EAAK,WACjB,OAAQA,EAAK,OACb,YAAaA,EAAK,YAClB,cAAeA,EAAK,cACpB,MAAOA,EAAK,MACZ,OAAQ,UACR,UAAW9B,EAAA,EACX,UAAWA,EAAA,CAAgB,EAG7B,MAAMe,EAAOC,EAAW1B,EAAI,UAAU,EAAGyC,CAAO,EAGhD,MAAMnB,EAAUvB,EAAIC,EAAI,QAASwC,EAAK,EAAE,EAAG,CACzC,eAAgBA,EAAK,eAAiB,EACtC,UAAW9B,EAAA,CAAgB,CAC5B,CAEH,OAASrB,EAAO,CACd,QAAQ,MAAMuB,EAAQ,qBAAsBvB,CAAK,EACjDC,EAASsB,EAAQ,6BAA6B,CAChD,QAAA,CACEhC,EAAW,EAAK,CAClB,CACF,EAGM8D,GAAsB,MAAOC,GAAc,CAC/C,GAAK,OAAO,QAAQ/B,EAAQ,0BAA0B,EAItD,CAAAhC,EAAW,EAAI,EACfU,EAAS,EAAE,EAEX,GAAI,CACF,MAAMgC,EAAUvB,EAAIC,EAAI,WAAY2C,CAAS,EAAG,CAC9C,OAAQ,YACR,UAAWjC,EAAA,CAAgB,CAC5B,EAGD,MAAM+B,EAAU5D,EAAW,KAAK+D,GAAKA,EAAE,KAAOD,CAAS,EACnDF,GAAWA,EAAQ,SAAW,aAChC,MAAMnB,EAAUvB,EAAIC,EAAI,QAASyC,EAAQ,MAAM,EAAG,CAChD,eAAgB,UAAU,CAAC,EAC3B,UAAW/B,EAAA,CAAgB,CAC5B,CAGL,OAASrB,EAAO,CACd,QAAQ,MAAMuB,EAAQ,uBAAwBvB,CAAK,EACnDC,EAASsB,EAAQ,+BAA+B,CAClD,QAAA,CACEhC,EAAW,EAAK,CAClB,EACF,EAEA,OACEiE,EAAAA,KAAC,MAAA,CAAI,UAAU,kDAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,oCAAqC,SAAAlC,EAAQ,gBAAgB,QAG1E,MAAA,CAAI,UAAU,qBACZ,SAAAD,EAAK,IAAKoC,GACTD,EAAAA,IAACE,EAAA,CAEC,UAAW,2BACTzD,IAAcwD,EAAI,GAAK,yCAA2C,gBACpE,GACA,QAAS,IAAMvD,EAAauD,EAAI,EAAE,EAEjC,SAAAA,EAAI,IAAA,EANAA,EAAI,EAAA,CAQZ,EACH,EAEC1D,GACCyD,EAAAA,IAAC,MAAA,CAAI,UAAU,2CACZ,SAAAzD,EACH,EAGDE,IAAc,cACbsD,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAmC,SAAAlC,EAAQ,yBAAyB,EACjF7B,EAAe,SAAW,EACzB8D,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,sBAAuB,SAAAlC,EAAQ,sBAAsB,EAClEkC,EAAAA,IAACE,EAAA,CACC,QAAS,IAAMxD,EAAa,QAAQ,EACpC,UAAU,mDAET,SAAAoB,EAAQ,wBAAA,CAAA,CACX,EACF,EAEAkC,MAAC,MAAA,CAAI,UAAU,YACZ,WAAe,IAAKG,GAAA,SACnBH,OAAAA,EAAAA,IAAC,OAAqB,UAAU,0DAC9B,SAAAD,OAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,wBACX,SAAA,GAAAK,EAAAD,EAAQ,SAAR,YAAAC,EAAgB,UAAWtC,EAAQ,OAAO,QAAIuC,EAAAF,EAAQ,cAAR,YAAAE,EAAqB,UAAWvC,EAAQ,OAAA,EACzF,QACC,IAAA,CAAE,UAAU,8BACV,SAAA9C,EAAWmF,EAAQ,SAAS,EAC/B,EACAH,EAAAA,IAAC,MAAA,CAAI,UAAU,OACb,SAAAA,EAAAA,IAAC,OAAA,CAAK,UAAW,2EACfG,EAAQ,SAAW,UAAY,wBAC/BA,EAAQ,SAAW,WAAa,wBAChC,yBACF,GACG,SAAAA,EAAQ,SAAW,UAAYrC,EAAQ,UACvCqC,EAAQ,SAAW,WAAarC,EAAQ,SAAWA,EAAQ,UAC9D,CAAA,CACF,CAAA,EACF,EACCqC,EAAQ,SAAW,WAClBH,EAAAA,IAACE,EAAA,CACC,QAAS,IAAM7B,GAAoB8B,EAAQ,EAAE,EAC7C,UAAU,yDACV,SAAUtE,EAET,SAAAA,EAAUiC,EAAQ,WAAaA,EAAQ,QAAA,CAAA,CAC1C,CAAA,CAEJ,CAAA,EA7BQqC,EAAQ,EA8BlB,EACD,CAAA,CACH,CAAA,CAAA,CAEJ,EACE1D,IAAc,SAChBsD,EAAAA,KAAAO,EAAAA,SAAA,CACE,SAAA,CAAAP,EAAAA,KAAC,MAAA,CAAI,UAAU,uCACb,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,UAAU,iCACX,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,gBAAiB,SAAAlC,EAAQ,cAAc,EAAO,IAAEA,EAAQ,8BAAA,EAC1E,EACAiC,EAAAA,KAAC,KAAA,CAAG,UAAU,+DACZ,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAI,WAAQ,uBAAA,CAAwB,EACrCA,EAAAA,IAAC,KAAA,CAAI,SAAAlC,EAAQ,wBAAA,CAAyB,EACtCkC,EAAAA,IAAC,KAAA,CAAI,SAAAlC,EAAQ,wBAAA,CAAyB,CAAA,CAAA,CACxC,CAAA,EACF,EAEAiC,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,2CAA4C,SAAAlC,EAAQ,OAAO,EAC5EiC,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAC,EAAAA,IAACO,EAAA,CAAe,UAAU,kBAAA,CAAmB,EAC7CP,EAAAA,IAAC,OAAA,CAAM,UAAAxE,GAAA,YAAAA,EAAQ,UAAWsC,EAAQ,kBAAA,CAAmB,CAAA,CAAA,CACvD,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAkC,EAAAA,IAAC,QAAA,CAAM,UAAU,2CAA4C,SAAAlC,EAAQ,QAAQ,EAC7EiC,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAC,EAAAA,IAACO,EAAA,CAAe,UAAU,mBAAA,CAAoB,EAC9CP,EAAAA,IAAC,OAAA,CAAM,UAAArE,GAAA,YAAAA,EAAa,UAAWmC,EAAQ,kBAAA,CAAmB,CAAA,CAAA,CAC5D,CAAA,EACF,EAEAkC,EAAAA,IAACE,EAAA,CACC,QAASzB,GACT,SAAU,CAACjD,GAAU,CAACG,GAAeE,EAEpC,WACCkE,EAAAA,KAAAO,EAAAA,SAAA,CACE,SAAA,CAAAN,EAAAA,IAACQ,GAAA,CAAU,UAAU,cAAA,CAAe,EACpCR,EAAAA,IAAC,OAAA,CAAM,SAAAlC,EAAQ,kBAAA,CAAmB,CAAA,CAAA,CACpC,EAEAiC,EAAAA,KAAAO,EAAAA,SAAA,CACE,SAAA,CAAAN,EAAAA,IAACS,EAAA,EAAM,EACPT,EAAAA,IAAC,OAAA,CAAM,SAAAlC,EAAQ,eAAA,CAAgB,CAAA,CAAA,CACjC,CAAA,CAAA,EAIHtC,GAAUG,GACTqE,EAAAA,IAAC,KAAE,UAAU,0CACV,WAAQ,gCAAA,CACX,CAAA,EAEJ,EAGC7D,EAAe,OAAS,GACvB4D,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,uCAAwC,SAAAlC,EAAQ,mBAAmB,EACjFkC,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAA7D,EAAe,IAAKuD,GAAA,WACnBK,OAAAA,EAAAA,KAAC,MAAA,CAAkB,UAAU,0DAC3B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,wBAAyB,SAAAN,EAAK,WAAW,EACvDK,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAACU,GAAA,CAAO,UAAU,MAAA,CAAO,SACxB,OAAA,CAAM,SAAA,CAAAhB,EAAK,OAAO,KAAGA,EAAK,YAAY,IAAE5B,EAAQ,QAAQ,GAAA,CAAA,CAAC,CAAA,CAAA,CAC5D,CAAA,EACF,EACAiC,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iCAAiC,SAAA,CAAA,KAAEK,EAAAV,EAAK,QAAL,YAAAU,EAAY,gBAAe,EAAE,EAC/EJ,EAAAA,IAAC,OAAI,UAAU,yBACZ,WAAK,eAAiB,EACnB,GAAGN,EAAK,cAAc,IAAIA,EAAK,eAAiB,EAAI5B,EAAQ,SAAWA,EAAQ,OAAO,IAAIA,EAAQ,UAAU,GAC5GA,EAAQ,SAAA,CACd,CAAA,CAAA,CACF,CAAA,EACF,EAEAiC,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACO,EAAA,CAAe,UAAU,sBAAA,CAAuB,QAChD,OAAA,CAAK,UAAU,WAAY,UAAAF,EAAAX,EAAK,SAAL,YAAAW,EAAa,OAAA,CAAQ,CAAA,EACnD,EACAN,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACO,EAAA,CAAe,UAAU,uBAAA,CAAwB,QACjD,OAAA,CAAK,UAAU,WAAY,UAAAI,EAAAjB,EAAK,cAAL,YAAAiB,EAAkB,OAAA,CAAQ,CAAA,EACxD,EACAZ,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACY,GAAA,CAAQ,UAAU,UAAA,CAAW,EAC9BZ,EAAAA,IAAC,OAAA,CAAM,SAAAhF,EAAW0E,EAAK,aAAa,CAAA,CAAE,CAAA,EACxC,EACAK,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAACS,EAAA,CAAM,UAAU,UAAA,CAAW,SAC3B,OAAA,CAAM,SAAA,CAAAf,EAAK,SAAS,MAAIA,EAAK,QAAA,CAAA,CAAS,CAAA,CAAA,CACzC,CAAA,EACF,EAEAM,EAAAA,IAACE,EAAA,CACC,QAAS,IAAMT,GAAeC,CAAI,EAClC,SAAU,CAACA,EAAK,gBAAkB7D,EAClC,UAAW,UACT6D,EAAK,eAAiB,EAClB,mCACA,iCACN,GAEC,SAAAA,EAAK,eAAiB,EAAI5B,EAAQ,eAAiBA,EAAQ,qBAAA,CAAA,CAC9D,GAhDQ4B,EAAK,EAiDf,EACD,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,EAEAK,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,kCAAmC,SAAAlC,EAAQ,WAAW,EAEnE/B,EAAW,SAAW,EACrBgE,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAAA,IAACS,EAAA,CAAM,UAAU,sCAAA,CAAuC,EACxDT,EAAAA,IAAC,IAAA,CAAE,UAAU,iBAAkB,WAAQ,6BAA6B,EACpEA,EAAAA,IAACE,EAAA,CACC,QAAS,IAAMxD,EAAa,QAAQ,EACpC,UAAU,4CAET,SAAAoB,EAAQ,yBAAA,CAAA,CACX,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,YACZ,SAAA/B,EAAW,IAAK4D,GAAA,mBACfI,OAAAA,EAAAA,KAAC,MAAA,CAEC,UAAU,0DAEV,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,wBACX,SAAA,EAAAM,GAAAD,EAAAT,EAAQ,SAAR,YAAAS,EAAgB,UAAhB,YAAAC,EAAyB,MAAM,KAAK,GAAG,OAAIQ,GAAAF,EAAAhB,EAAQ,cAAR,YAAAgB,EAAqB,UAArB,YAAAE,EAA8B,MAAM,KAAK,EAAC,EACxF,EACAb,EAAAA,IAAC,OAAA,CAAK,UAAW,2EACfL,EAAQ,SAAW,YACf,wBACAA,EAAQ,SAAW,YACjB,0BACA,uBACR,GACG,SAAAA,EAAQ,SAAW,YAAc7B,EAAQ,WACzC6B,EAAQ,SAAW,UAAY7B,EAAQ,UACvC6B,EAAQ,SAAW,YAAc7B,EAAQ,UAAY6B,EAAQ,MAAA,CAChE,CAAA,EACF,EACAI,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iCAAiC,SAAA,CAAA,KAAEe,EAAAnB,EAAQ,QAAR,YAAAmB,EAAe,gBAAe,EAAE,EAClFd,EAAAA,IAAC,OAAI,UAAU,yBACZ,WAAQ,eAAiBhF,EAAW2E,EAAQ,aAAa,CAAA,CAC5D,CAAA,CAAA,CACF,CAAA,EACF,EAEAI,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACO,EAAA,CAAe,UAAU,sBAAA,CAAuB,QAChD,OAAA,CAAK,UAAU,WAAY,UAAAQ,EAAApB,EAAQ,SAAR,YAAAoB,EAAgB,OAAA,CAAQ,CAAA,EACtD,EACAhB,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAACO,EAAA,CAAe,UAAU,uBAAA,CAAwB,QACjD,OAAA,CAAK,UAAU,WAAY,UAAAS,EAAArB,EAAQ,cAAR,YAAAqB,EAAqB,OAAA,CAAQ,CAAA,EAC3D,EACCrB,EAAQ,YACPI,OAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,OAAA,CAAK,UAAU,OAAQ,SAAAlC,EAAQ,UAAU,EAC1CkC,EAAAA,IAAC,OAAA,CAAM,SAAAL,EAAQ,UAAA,CAAW,CAAA,CAAA,CAC5B,CAAA,EAEJ,EAECA,EAAQ,SAAW,WAClBK,EAAAA,IAAC,MAAA,CAAI,UAAU,qBACb,SAAAA,EAAAA,IAACE,EAAA,CACC,QAAS,IAAMN,GAAoBD,EAAQ,EAAE,EAC7C,SAAU9D,EACV,UAAU,iGAET,SAAAA,EAAUiC,EAAQ,WAAaA,EAAQ,gBAAA,CAAA,CAC1C,CACF,CAAA,CAAA,EAtDG6B,EAAQ,EAAA,EAyDhB,CAAA,CACH,CAAA,CAAA,CAEJ,CAAA,EAEJ,EAGAK,EAAAA,IAAC,MAAA,CAAI,UAAU,iCACX,SAAAD,EAAAA,KAACkB,GAAA,CACC,OAAQtE,GAAmB,CAAC,EAAG,CAAC,EAChC,KAAMA,EAAkB,GAAK,EAC7B,MAAO,CAAE,OAAQ,OAAQ,MAAO,OAAQ,UAAW,OAAA,EAEnD,SAAA,CAAAqD,EAAAA,IAACkB,GAAA,CACC,IAAI,qDACJ,YAAY,oFAAA,CAAA,EAEdlB,EAAAA,IAACpF,GAAA,CAAiB,SAAUmD,CAAA,CAAsB,EAGjDvC,GACCwE,EAAAA,IAACmB,EAAA,CAAO,SAAU,CAAC3F,EAAO,IAAKA,EAAO,GAAG,EAAG,KAAMd,EAChD,gBAAC0G,EAAA,CAAO,SAAA,CAAAtD,EAAQ,cAAetC,EAAO,OAAA,CAAA,CAAQ,CAAA,CAChD,EAIDG,GACCqE,EAAAA,IAACmB,EAAA,CACC,SAAU,CAACxF,EAAY,IAAKA,EAAY,GAAG,EAC3C,KAAM,IAAIhB,EAAE,KAAK,CACf,GAAGD,EAAY,QACf,QAAS,iGACT,cAAe,mGAAA,CAChB,EAED,gBAAC0G,EAAA,CAAO,SAAA,CAAAtD,EAAQ,eAAgBnC,EAAY,OAAA,CAAA,CAAQ,CAAA,CAAA,EAIvDkB,GACCmD,EAAAA,IAACmB,EAAA,CACC,SAAU,CAACtE,EAAe,SAAUA,EAAe,SAAS,EAC5D,KAAM,IAAIlC,EAAE,KAAK,CACf,GAAGD,EAAY,QACf,QAAS,mGACT,cAAe,qGAAA,CAChB,EAED,SAAAsF,EAAAA,IAACoB,EAAA,CACC,SAAApB,EAAAA,IAAC,MAAA,CAAI,UAAU,YACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,UAAU,cAAe,SAAA3D,EAAa,WAAW,EACtD,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAIJ,CAEJ,CAAA,EACF,CAEJ"}