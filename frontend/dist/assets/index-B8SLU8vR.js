const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-CI79chvO.js","assets/leaflet-BldE4BD4.js","assets/react-DcIcrUde.js","assets/firebase-CR0su15k.js","assets/LandingPage-DXwA9gx-.js","assets/Passenger-Dkyyt3Jz.js","assets/Button-Dy4WXtgN.js","assets/Button-Dgihpmma.css","assets/Driver-DrMc2Jr8.js"])))=>i.map(i=>d[i]);
import{r as v,a as ze,b as g}from"./leaflet-BldE4BD4.js";import{u as G,N as z,a as ke,L as b,B as Le,R as Oe,b as P}from"./react-DcIcrUde.js";import{g as Re,a as X,i as ee,p as te,b as re,c as _e,G as Me,F as Ae,d as I,s as Ie,e as De,q as $,w as R,o as K,f as pe,h as C,j as Y,u as W,k as fe,l as _,m as Ue,n as Fe,r as Be,t as Te,v as ae,x as se,y as Ve,z as He,A as qe}from"./firebase-CR0su15k.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=a(o);fetch(o.href,n)}})();const We="modulepreload",Ge=function(e){return"/"+e},oe={},D=function(r,a,s){let o=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),f=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(a.map(m=>{if(m=Ge(m),m in oe)return;oe[m]=!0;const j=m.endsWith(".css"),B=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${B}`))return;const N=document.createElement("link");if(N.rel=j?"stylesheet":We,j||(N.as="script"),N.crossOrigin="",N.href=m,f&&N.setAttribute("nonce",f),document.head.appendChild(N),j)return new Promise((T,V)=>{N.addEventListener("load",T),N.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${m}`)))})}))}function n(i){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=i,window.dispatchEvent(f),!f.defaultPrevented)throw i}return o.then(i=>{for(const f of i||[])f.status==="rejected"&&n(f.reason);return r().catch(n)})};var xe={exports:{}},U={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $e=v,Ke=Symbol.for("react.element"),Ye=Symbol.for("react.fragment"),Ze=Object.prototype.hasOwnProperty,Qe=$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Je={key:!0,ref:!0,__self:!0,__source:!0};function ge(e,r,a){var s,o={},n=null,i=null;a!==void 0&&(n=""+a),r.key!==void 0&&(n=""+r.key),r.ref!==void 0&&(i=r.ref);for(s in r)Ze.call(r,s)&&!Je.hasOwnProperty(s)&&(o[s]=r[s]);if(e&&e.defaultProps)for(s in r=e.defaultProps,r)o[s]===void 0&&(o[s]=r[s]);return{$$typeof:Ke,type:e,key:n,ref:i,props:o,_owner:Qe.current}}U.Fragment=Ye;U.jsx=ge;U.jsxs=ge;xe.exports=U;var t=xe.exports,ve,ne=ze;ve=ne.createRoot,ne.hydrateRoot;const Xe={apiKey:"AIzaSyBwff9ZSIOE8hF3c0-kKxX7zyj8MpO0C6E",authDomain:"transportapp-dfd34.firebaseapp.com",projectId:"transportapp-dfd34",storageBucket:"transportapp-dfd34.appspot.com",messagingSenderId:"81243763076",appId:"1:81243763076:web:7e0e3baca62282b0476dd1",measurementId:"G-HQ0VQ56HPB"};let S,w,y;try{S=Re(),w=X(S),y=ee(S,{localCache:te({tabManager:re()})})}catch{S=_e(Xe),w=X(S),y=ee(S,{localCache:te({tabManager:re()})})}const ye=async()=>{try{return w?(await Ie(w,De),console.log("Auth persistence initialized"),!0):!1}catch(e){return console.error("Error initializing auth persistence:",e),!1}};ye().catch(console.error);const be=new Me;be.setCustomParameters({prompt:"select_account",login_hint:"user@example.com"});const we=new Ae;we.setCustomParameters({display:"popup",auth_type:"reauthenticate"});const et=I(y,"users"),Z=I(y,"trips");I(y,"bookings");const ie=300;let ce=0;const je=()=>{const e=Date.now(),r=e-ce;if(r<ie){const a=ie-r;return console.warn(`Rate limit hit, waiting ${a}ms`),a}return ce=e,0},Q=async e=>{const r=je();return r>0&&await new Promise(a=>setTimeout(a,r)),e()},E=async(e,r,a=!0)=>Q(async()=>{try{const s=C(et,e),o=Y(),n={...r,updatedAt:o,...!r.createdAt&&{createdAt:o}};await fe(s,n,{merge:a});const i=await _(s);return{id:i.id,...i.data()}}catch(s){throw console.error("Error creating/updating user:",s),s}}),Nt=async e=>Q(async()=>{try{const r=C(Z),a=Y(),s={...e,status:"pending",createdAt:a,updatedAt:a};await fe(r,s);const o=await _(r);return{id:o.id,...o.data()}}catch(r){throw console.error("Error creating trip:",r),r}}),Et=(e,r,a=[])=>{try{const s=$(Z,R("status","==",e),K("createdAt","desc"));return pe(s,o=>{const n=o.docs.map(i=>{const f=i.data();return a.length>0?{id:i.id,...a.reduce((m,j)=>(f[j]!==void 0&&(m[j]=f[j]),m),{})}:{id:i.id,...f}});r(n)})}catch(s){throw console.error("Error subscribing to trips:",s),s}},Ct=async(e,r,a={})=>{try{je();const s=C(y,"trips",e),o={status:r,updatedAt:Y(),...a};return await W(s,o),{id:e,...o}}catch(s){throw console.error("Error updating trip status:",s),s}},Pt=async(e,r=!1)=>Q(async()=>{try{const a=I(y,"trips"),s=r?["completed","cancelled"]:["pending","accepted","in_progress"],o=$(a,R("driverId","==",e),R("status","in",s),K("departureTime","desc"));return(await Ue(o)).docs.map(i=>({id:i.id,...i.data()}))}catch(a){throw console.error("Error getting user trips:",a),a}}),St=(e,r)=>{try{const a=$(Z,R("driverId","==",e),K("createdAt","desc"));return pe(a,s=>{const o=s.docs.map(n=>({id:n.id,...n.data()}));r(o)})}catch(a){throw console.error("Error subscribing to trip updates:",a),a}},Ne=v.createContext();function F(){return v.useContext(Ne)}function Ee({children:e}){const[r,a]=v.useState(null),[s,o]=v.useState(!0),[n,i]=v.useState(null),f=v.useCallback(async(l,c,d,x="passenger")=>{try{o(!0),i(null);const h=await Fe(w,l,c),{user:u}=h;return await Be(u,{displayName:d,photoURL:u.photoURL||""}),await E(u.uid,{email:u.email,displayName:d,role:x,photoURL:u.photoURL||"",provider:"email",createdAt:new Date().toISOString()}),h}catch(h){console.error("Error al registrar usuario:",h);let u="Error al registrar el usuario";switch(h.code){case"auth/email-already-in-use":u="El correo electrónico ya está en uso";break;case"auth/invalid-email":u="El correo electrónico no es válido";break;case"auth/weak-password":u="La contraseña es demasiado débil";break;case"auth/operation-not-allowed":u="La operación no está permitida";break;default:u=h.message||u}throw i(u),new Error(u)}finally{o(!1)}},[]),m=v.useCallback(async(l,c)=>{var d;try{o(!0),i(null);const x=await Te(w,l,c);return(d=x==null?void 0:x.user)!=null&&d.uid&&await W(C(y,"users",x.user.uid),{lastLogin:new Date().toISOString()}),x}catch(x){console.error("Error al iniciar sesión:",x);let h="Error al iniciar sesión";switch(x.code){case"auth/user-not-found":case"auth/wrong-password":h="Correo o contraseña incorrectos";break;case"auth/too-many-requests":h="Demasiados intentos fallidos. Por favor, inténtalo más tarde";break;case"auth/user-disabled":h="Esta cuenta ha sido deshabilitada";break;default:h=x.message||h}throw i(h),new Error(h)}finally{o(!1)}},[]),j=v.useCallback(async()=>{try{const l=await ae(w,be,se),{user:c}=l;return c&&await E(c.uid,{email:c.email,displayName:c.displayName,photoURL:c.photoURL,role:"passenger",provider:"google.com",lastLogin:new Date().toISOString()}),l}catch(l){console.error("Error al iniciar sesión con Google:",l);let c="Error al iniciar sesión con Google";switch(l.code){case"auth/account-exists-with-different-credential":c="Ya existe una cuenta con el mismo correo pero con otro proveedor";break;case"auth/popup-closed-by-user":c="La ventana de autenticación fue cerrada";break;case"auth/cancelled-popup-request":c="Solicitud de autenticación cancelada";break;case"auth/popup-blocked":c="El navegador bloqueó la ventana emergente. Por favor, permite ventanas emergentes para este sitio";break;default:c=l.message||c}throw new Error(c)}},[E]),B=v.useCallback(async()=>{try{const l=await ae(w,we,se),{user:c}=l;return c&&await E(c.uid,{email:c.email,displayName:c.displayName,photoURL:c.photoURL,role:"passenger",provider:"facebook.com",lastLogin:new Date().toISOString()}),l}catch(l){console.error("Error al iniciar sesión con Facebook:",l);let c="Error al iniciar sesión con Facebook";switch(l.code){case"auth/account-exists-with-different-credential":c="Ya existe una cuenta con el mismo correo pero con otro proveedor";break;case"auth/popup-closed-by-user":c="La ventana de autenticación fue cerrada";break;case"auth/cancelled-popup-request":c="Solicitud de autenticación cancelada";break;case"auth/popup-blocked":c="El navegador bloqueó la ventana emergente. Por favor, permite ventanas emergentes para este sitio";break;case"auth/facebook-auth-already-in-use":c="Esta cuenta de Facebook ya está en uso";break;default:c=l.message||c}throw new Error(c)}},[E]),N=()=>qe(w),T=l=>He(w,l),V=v.useCallback(()=>{i(null)},[]),J=v.useCallback(async l=>{var x,h;if(!l)return null;const c=3;let d=0;for(;d<c;)try{return(await _(C(y,"users",l.uid))).exists()?await W(C(y,"users",l.uid),{lastLogin:new Date().toISOString()}):await E(l.uid,{email:l.email,displayName:l.displayName||"Usuario",photoURL:l.photoURL||"",role:"passenger",provider:((h=(x=l.providerData)==null?void 0:x[0])==null?void 0:h.providerId)||"email",lastLogin:new Date().toISOString(),createdAt:new Date().toISOString()}),l}catch(u){if(console.error(`Error en verificación de usuario (intento ${d+1}):`,u),d++,d<c)await new Promise(k=>setTimeout(k,1e3*Math.pow(2,d)));else throw console.error("Número máximo de reintentos alcanzado para verificación de usuario"),u}},[E,y]);v.useEffect(()=>{let l=!0;const c=Ve(w,async d=>{var x,h,u,k;try{if(d){await J(d);const L=await _(C(y,"users",d.uid));if(L.exists()){const H=L.data();a({uid:d.uid,email:d.email,displayName:d.displayName||H.displayName,photoURL:d.photoURL||H.photoURL,role:H.role||"passenger",provider:((h=(x=d.providerData)==null?void 0:x[0])==null?void 0:h.providerId)||"email"})}else a({uid:d.uid,email:d.email,displayName:d.displayName||"Usuario",photoURL:d.photoURL||"",role:"passenger",provider:((k=(u=d.providerData)==null?void 0:u[0])==null?void 0:k.providerId)||"email"})}else a(null)}catch(L){console.error("Error al verificar el estado de autenticación:",L),i("Error al cargar la información del usuario")}finally{l&&o(!1)}});return()=>{l=!1,c()}},[J]);const Se={currentUser:r,signup:f,login:m,loginWithGoogle:j,loginWithFacebook:B,logout:N,resetPassword:T,loading:s,error:n,clearError:V};return t.jsx(Ne.Provider,{value:Se,children:!s&&e})}function q({children:e,roles:r=[]}){const{currentUser:a,loading:s}=F(),o=G();if(s)return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando..."})]})});if(!a)return t.jsx(z,{to:"/login",state:{from:o},replace:!0});if(r.length>0){const n=a.role||"passenger";if(!r.includes(n))return t.jsx(z,{to:"/",replace:!0})}return e}var Ce={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},le=g.createContext&&g.createContext(Ce),tt=["attr","size","title"];function rt(e,r){if(e==null)return{};var a=at(e,r),s,o;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)s=n[o],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function at(e,r){if(e==null)return{};var a={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(r.indexOf(s)>=0)continue;a[s]=e[s]}return a}function M(){return M=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},M.apply(this,arguments)}function de(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),a.push.apply(a,s)}return a}function A(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?de(Object(a),!0).forEach(function(s){st(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):de(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function st(e,r,a){return r=ot(r),r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function ot(e){var r=nt(e,"string");return typeof r=="symbol"?r:r+""}function nt(e,r){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Pe(e){return e&&e.map((r,a)=>g.createElement(r.tag,A({key:a},r.attr),Pe(r.child)))}function p(e){return r=>g.createElement(it,M({attr:A({},e.attr)},r),Pe(e.child))}function it(e){var r=a=>{var{attr:s,size:o,title:n}=e,i=rt(e,tt),f=o||a.size||"1em",m;return a.className&&(m=a.className),e.className&&(m=(m?m+" ":"")+e.className),g.createElement("svg",M({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,i,{className:m,style:A(A({color:e.color||a.color},a.style),e.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),n&&g.createElement("title",null,n),e.children)};return le!==void 0?g.createElement(le.Consumer,null,a=>r(a)):r(Ce)}function zt(e){return p({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(e)}function kt(e){return p({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(e)}function ct(e){return p({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(e)}function lt(e){return p({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M499.99 176h-59.87l-16.64-41.6C406.38 91.63 365.57 64 319.5 64h-127c-46.06 0-86.88 27.63-103.99 70.4L71.87 176H12.01C4.2 176-1.53 183.34.37 190.91l6 24C7.7 220.25 12.5 224 18.01 224h20.07C24.65 235.73 16 252.78 16 272v48c0 16.12 6.16 30.67 16 41.93V416c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-32h256v32c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-54.07c9.84-11.25 16-25.8 16-41.93v-48c0-19.22-8.65-36.27-22.07-48H494c5.51 0 10.31-3.75 11.64-9.09l6-24c1.89-7.57-3.84-14.91-11.65-14.91zm-352.06-17.83c7.29-18.22 24.94-30.17 44.57-30.17h127c19.63 0 37.28 11.95 44.57 30.17L384 208H128l19.93-49.83zM96 319.8c-19.2 0-32-12.76-32-31.9S76.8 256 96 256s48 28.71 48 47.85-28.8 15.95-48 15.95zm320 0c-19.2 0-48 3.19-48-15.95S396.8 256 416 256s32 12.76 32 31.9-12.8 31.9-32 31.9z"},child:[]}]})(e)}function Lt(e){return p({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(e)}function Ot(e){return p({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(e)}function Rt(e){return p({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(e)}function _t(e){return p({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(e)}function Mt(e){return p({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(e)}function At(e){return p({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(e)}function It(e){return p({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function Dt(e){return p({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function Ut(e){return p({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(e)}function ue(e){return p({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(e)}function Ft(e){return p({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(e)}function Bt(e){return p({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(e)}function Tt(e){return p({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"},child:[]}]})(e)}function Vt(e){return p({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"},child:[]}]})(e)}function he(e){return p({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function dt(){const{currentUser:e,logout:r}=F(),[a,s]=g.useState(!1),o=ke(),n=async()=>{try{await r(),o("/")}catch(i){console.error("Error al cerrar sesión:",i)}};return t.jsxs("nav",{className:"bg-white shadow-lg",children:[t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between h-16",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs(b,{to:"/",className:"flex-shrink-0 flex items-center",children:[t.jsx(lt,{className:"h-8 w-8 text-blue-600"}),t.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"TransportApp"})]}),t.jsxs("div",{className:"hidden md:ml-6 md:flex md:space-x-8",children:[t.jsx(b,{to:"/",className:"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Inicio"}),e&&t.jsx(b,{to:e.role==="driver"?"/driver":"/passenger",className:"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:e.role==="driver"?"Mis Viajes":"Buscar Viaje"})]})]}),t.jsx("div",{className:"hidden md:ml-6 md:flex md:items-center",children:e?t.jsx("div",{className:"ml-3 relative",children:t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("span",{className:"text-sm text-gray-700",children:["Hola, ",e.displayName||e.email]}),t.jsxs("div",{className:"relative group",children:[t.jsx("button",{className:"flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>s(!a),children:t.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-700",children:t.jsx(he,{className:"h-5 w-5"})})}),a&&t.jsxs("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:[t.jsx(b,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>s(!1),children:"Mi perfil"}),t.jsxs("button",{onClick:n,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[t.jsx(ue,{className:"mr-2"}),"Cerrar sesión"]})]})]})]})}):t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(b,{to:"/login",className:"text-gray-700 hover:text-blue-600 px-3 py-2 text-sm font-medium",state:{from:window.location.pathname},children:"Iniciar sesión"}),t.jsx(b,{to:"/login",className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700",state:{from:window.location.pathname,register:!0},children:"Registrarse"})]})}),t.jsx("div",{className:"-mr-2 flex items-center md:hidden",children:t.jsxs("button",{onClick:()=>s(!a),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500",children:[t.jsx("span",{className:"sr-only",children:"Abrir menú principal"}),t.jsx(ct,{className:"block h-6 w-6"})]})})]})}),a&&t.jsxs("div",{className:"md:hidden",children:[t.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[t.jsx(b,{to:"/",className:"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800 block pl-3 pr-4 py-2 border-l-4 text-base font-medium",onClick:()=>s(!1),children:"Inicio"}),e&&t.jsx(b,{to:e.role==="driver"?"/driver":"/passenger",className:"border-transparent text-gray-600 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-800 block pl-3 pr-4 py-2 border-l-4 text-base font-medium",onClick:()=>s(!1),children:e.role==="driver"?"Mis Viajes":"Buscar Viaje"})]}),t.jsxs("div",{className:"pt-4 pb-3 border-t border-gray-200",children:[e?t.jsxs("div",{className:"flex items-center px-4",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-700",children:t.jsx(he,{className:"h-6 w-6"})})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("div",{className:"text-base font-medium text-gray-800",children:e.displayName||e.email}),t.jsx("div",{className:"text-sm font-medium text-gray-500",children:e.role==="driver"?"Conductor":"Pasajero"})]})]}):t.jsxs("div",{className:"space-y-2 px-4",children:[t.jsx(b,{to:"/login",className:"w-full flex justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",state:{from:window.location.pathname},onClick:()=>s(!1),children:"Iniciar sesión"}),t.jsxs("p",{className:"text-center text-sm text-gray-500",children:["¿No tienes cuenta?"," ",t.jsx(b,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",state:{from:window.location.pathname,register:!0},onClick:()=>s(!1),children:"Regístrate"})]})]}),e&&t.jsxs("div",{className:"mt-3 space-y-1",children:[t.jsx(b,{to:"/profile",className:"block px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100",onClick:()=>s(!1),children:"Mi perfil"}),t.jsxs("button",{onClick:()=>{n(),s(!1)},className:"w-full text-left px-4 py-2 text-base font-medium text-gray-500 hover:text-gray-800 hover:bg-gray-100 flex items-center",children:[t.jsx(ue,{className:"mr-2"}),"Cerrar sesión"]})]})]})]})]})}const ut=async()=>{try{await ye(),console.log("Firebase initialized successfully")}catch(e){console.error("Error initializing Firebase:",e)}};ut();const ht=g.lazy(()=>D(()=>import("./Login-CI79chvO.js"),__vite__mapDeps([0,1,2,3]))),mt=g.lazy(()=>D(()=>import("./LandingPage-DXwA9gx-.js"),__vite__mapDeps([4,1,3,2]))),pt=g.lazy(()=>D(()=>import("./Passenger-Dkyyt3Jz.js"),__vite__mapDeps([5,1,3,6,7,2]))),ft=g.lazy(()=>D(()=>import("./Driver-DrMc2Jr8.js"),__vite__mapDeps([8,1,3,6,7,2]))),xt=()=>t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando..."})]})}),gt=()=>{var s;const{currentUser:e}=F(),r=G();if((s=r.state)!=null&&s.from)return t.jsx(z,{to:r.state.from,replace:!0});const a=(e==null?void 0:e.role)==="driver"?"/driver":"/passenger";return t.jsx(z,{to:a,replace:!0})};function O({children:e}){return t.jsxs("div",{className:"min-h-screen flex flex-col",children:[t.jsx(dt,{}),t.jsx("main",{className:"flex-grow",children:e}),t.jsx("footer",{className:"bg-gray-800 text-white py-6",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"text-center",children:t.jsxs("p",{children:["© ",new Date().getFullYear()," TransportApp. Todos los derechos reservados."]})})})})]})}function vt({children:e}){var s,o;const{currentUser:r}=F(),a=G();if(r){const n=((o=(s=a.state)==null?void 0:s.from)==null?void 0:o.pathname)||(r.role==="driver"?"/driver":"/passenger");return t.jsx(z,{to:n,state:{from:a},replace:!0})}return e}function yt(){return t.jsx(g.Suspense,{fallback:t.jsx(xt,{}),children:t.jsx(Ee,{children:t.jsx(Le,{children:t.jsxs(Oe,{children:[t.jsx(P,{path:"/login",element:t.jsx(vt,{children:t.jsx(ht,{})})}),t.jsx(P,{path:"/",element:t.jsx(O,{children:t.jsx(mt,{})})}),t.jsx(P,{path:"/passenger/*",element:t.jsx(q,{children:t.jsx(O,{children:t.jsx(pt,{})})})}),t.jsx(P,{path:"/driver/*",element:t.jsx(q,{roles:["driver"],children:t.jsx(O,{children:t.jsx(ft,{})})})}),t.jsx(P,{path:"/app",element:t.jsx(q,{children:t.jsx(gt,{})})}),t.jsx(P,{path:"*",element:t.jsx(O,{children:t.jsx(z,{to:"/",replace:!0})})})]})})})})}const me=document.getElementById("root");me&&ve(me).render(t.jsx(g.StrictMode,{children:t.jsx(Ee,{children:t.jsx(yt,{})})}));export{Ft as F,kt as a,zt as b,he as c,Rt as d,_t as e,Vt as f,Tt as g,y as h,Dt as i,t as j,lt as k,At as l,Ut as m,Mt as n,Bt as o,Ot as p,St as q,It as r,Et as s,Lt as t,F as u,Pt as v,Ct as w,Nt as x};
//# sourceMappingURL=index-B8SLU8vR.js.map
